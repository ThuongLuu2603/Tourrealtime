import { type Tour, type HierarchyLevel, type SalesUnit, type Activity, type RegionalPerformance, type InsertTour, type InsertHierarchyLevel, type InsertSalesUnit, type InsertActivity, type InsertRegionalPerformance, type DashboardMetrics } from "@shared/schema";
import { randomUUID } from "crypto";
export interface IStorage {
// Tours
getTours(): Promise<Tour[]>;
getToursByCategory(category: string): Promise<Tour[]>;
getToursByArea(areaCode: string): Promise<Tour[]>;
getToursBySalesUnit(salesUnitCode: string): Promise<Tour[]>;
createTour(tour: InsertTour): Promise<Tour>;
updateTour(id: string, tour: Partial<Tour>): Promise<Tour | undefined>;
// Hierarchy Levels
getHierarchyLevels(): Promise<HierarchyLevel[]>;
getHierarchyLevelsByCategory(category: string): Promise<HierarchyLevel[]>;
getHierarchyLevelsByLevel(level: string): Promise<HierarchyLevel[]>;
createHierarchyLevel(level: InsertHierarchyLevel): Promise<HierarchyLevel>;
updateHierarchyLevel(id: string, level: Partial<HierarchyLevel>): Promise<HierarchyLevel | undefined>;
// Sales Units
getSalesUnits(): Promise<SalesUnit[]>;
createSalesUnit(unit: InsertSalesUnit): Promise<SalesUnit>;
updateSalesUnit(id: string, unit: Partial<SalesUnit>): Promise<SalesUnit | undefined>;
// Activities
getRecentActivities(limit: number): Promise<Activity[]>;
createActivity(activity: InsertActivity): Promise<Activity>;
// Regional Performance
getRegionalPerformance(): Promise<RegionalPerformance[]>;
createRegionalPerformance(performance: InsertRegionalPerformance): Promise<RegionalPerformance>;
// Dashboard Metrics
getDashboardMetrics(): Promise<DashboardMetrics>;
}
export class MemStorage implements IStorage {
private tours: Map<string, Tour>;
private hierarchyLevels: Map<string, HierarchyLevel>;
private salesUnits: Map<string, SalesUnit>;
private activities: Map<string, Activity>;
private regionalPerformance: Map<string, RegionalPerformance>;
constructor() {
this.tours = new Map();
this.hierarchyLevels = new Map();
this.salesUnits = new Map();
this.activities = new Map();
this.regionalPerformance = new Map();
this.initializeData();
}
private initializeData() {
// Initialize Sales Units
const salesUnitsData: InsertSalesUnit[] = [
{ name: "TP. Hồ Chí Minh", code: "HCM", performanceRate: "85.2", status: "good" },
{ name: "Hà Nội", code: "HN", performanceRate: "78.9", status: "good" },
{ name: "Cần Thơ", code: "CT", performanceRate: "72.4", status: "moderate" },
];
salesUnitsData.forEach(unitData => {
const unit: SalesUnit = {
id: randomUUID(),
name: unitData.name,
code: unitData.code,
performanceRate: unitData.performanceRate || "0",
status: unitData.status || "good"
};
this.salesUnits.set(unit.id, unit);
});
// Initialize Hierarchy Levels
const hierarchyData: InsertHierarchyLevel[] = [
// International - Level 1: Tour Quốc tế
{
name: "TOUR QUỐC TẾ",
code: "tour_quoc_te",
category: "international",
level: "tour_category",
parentCode: null,
planned: 4976,
sold: 2665,
remaining: 2311,
opensell: 3278,
recentlyBooked: 430,
recentlyBooked30min: 143,
completionRate: "13.4%",
plannedRevenue: "60962750000",
revenue: "8089550000",
remainingRevenue: "19932750000",
openRevenue: "71726000000",
recentlyRevenue: "11033931000",
recentlyRevenue30min: "3677977000",
targetPercentage: "75%"
},
// International - Level 2: Châu lục - Châu Á 30min = 8+10+2 = 20, Châu Âu = 1
    {
      name: "Châu Á",
      code: "chau_a",
      category: "international",
      level: "continent",
      parentCode: "tour_quoc_te",
      planned: 4481,
      sold: 2291,
      remaining: 2190,
      opensell: 2754,
      recentlyBooked: 332,
      recentlyBooked30min: 60,
      completionRate: "51.1",
      plannedRevenue: "55403750000",
      revenue: "39860500000",
      remainingRevenue: "15543250000",
      openRevenue: "42558250000",
      dailyRevenue: "595536500",
      recentlyRevenue30min: "1076882107",
      targetPercentage: "71.95"
    },
    {
      name: "Châu Âu",
      code: "chau_au",
      category: "international",
      level: "continent",
      parentCode: "tour_quoc_te",
      planned: 246,
      sold: 186,
      remaining: 60,
      opensell: 287,
      recentlyBooked: 21,
      recentlyBooked30min: 4,
      completionRate: "75.6%",
      plannedRevenue: "13865000000",
      revenue: "12861000000",
      remainingRevenue: "304750000",
      openRevenue: "17263750000",
      dailyRevenue: "1442085000",
      recentlyRevenue30min: "277452857",
      targetPercentage: "97.69%"
    },
    {
      name: "Châu Mỹ",
      code: "chau_my",
      category: "international",
      level: "continent",
      parentCode: "tour_quoc_te",
      planned: 98,
      sold: 33,
      remaining: 65,
      opensell: 33,
      recentlyBooked: 7,
      recentlyBooked30min: 1,
      completionRate: "33.7%",
      plannedRevenue: "5914750000",
      revenue: "1335500000",
      remainingRevenue: "4779250000",
      openRevenue: "1053750000",
      dailyRevenue: "175980000",
      recentlyRevenue30min: "2514000",
      targetPercentage: "19.20%"
    },
    {
      name: "Châu Đại Dương",
      code: "chau_dai_duong",
      category: "international",
      level: "continent",
      parentCode: "tour_quoc_te",
      planned: 82,
      sold: 88,
      remaining: -6,
      opensell: 93,
      recentlyBooked: 3,
      recentlyBooked30min: 1,
      completionRate: "107.3%",
      plannedRevenue: "2433750000",
      revenue: "3616000000",
      remainingRevenue: "-1182250000",
      openRevenue: "3288500000",
      dailyRevenue: "21000000",
      recentlyRevenue30min: "7000000",
      targetPercentage: "148.58%"
    },

// International - Level 3: Khu vực - 30min: Đông Bắc Á = 2+2+2+2 = 8, Đông Nam Á = 2+2+2+2+2 = 10, Nam Á = 
    {
      name: "Đông Bắc Á",
      code: "dong_bac_a",
      category: "international",
      level: "region",
      parentCode: "chau_a",
      planned: 2055,
      sold: 1597,
      remaining: 458,
      opensell: 1795,
      recentlyBooked: 248,
      recentlyBooked30min: 42,
      completionRate: "77.7%",
      plannedRevenue: "34158000000",
      revenue: "30887750000",
      remainingRevenue: "3470250000",
      openRevenue: "32081750000",
      dailyRevenue: "422308500",
      recentlyRevenue30min: "2502980",
      targetPercentage: "89.94%"
    },
    {
      name: "Đông Nam Á",
      code: "dong_nam_a",
      category: "international",
      level: "region",
      parentCode: "chau_a",
      planned: 2396,
      sold: 668,
      remaining: 1728,
      opensell: 931,
      recentlyBooked: 74,
      recentlyBooked30min: 14,
      completionRate: "27.9%",
      plannedRevenue: "20303500000",
      revenue: "6469000000",
      remainingRevenue: "13834500000",
      openRevenue: "6802250000",
      dailyRevenue: "820960000",
      recentlyRevenue30min: "168987938",
      targetPercentage: "41.7%"
    },
    {
      name: "Tây Á, Trung Đông, S.N.G",
      code: "tay_a_trung_dong",
      category: "international",
      level: "region",
      parentCode: "chau_a",
      planned: 23,
      sold: 20,
      remaining: 3,
      opensell: 21,
      recentlyBooked: 8,
      recentlyBooked30min: 3,
      completionRate: "87.0%",
      plannedRevenue: "821250000",
      revenue: "569000000",
      remainingRevenue: "252250000",
      openRevenue: "526750000",
      dailyRevenue: "270920000",
      recentlyRevenue30min: "101595000",
      targetPercentage: "69.28%"
    },
    {
      name: "Nam Á",
      code: "nam_a",
      category: "international",
      level: "region",
      parentCode: "chau_a",
      planned: 7,
      sold: 6,
      remaining: 1,
      opensell: 7,
      recentlyBooked: 2,
      recentlyBooked30min: 1,
      completionRate: "85.7%",
      plannedRevenue: "121000000",
      revenue: "134750000",
      remainingRevenue: "-20750000",
      openRevenue: "142500000",
      dailyRevenue: "41980000",
      recentlyRevenue30min: "20860000",
      targetPercentage: "111.36%"
    },
    {
      name: "Tây Âu",
      code: "tay_au",
      category: "international",
      level: "region",
      parentCode: "chau_au",
      planned: 0,
      sold: 124,
      remaining: -124,
      opensell: 195,
      recentlyBooked: 6,
      recentlyBooked30min: 1,
      completionRate: "-",
      plannedRevenue: "10843500000",
      revenue: "8243750000",
      remainingRevenue: "-8243750000",
      openRevenue: "10843500000",
      dailyRevenue: "34745000",
      recentlyRevenue30min: "65990000",
      targetPercentage: "-",
    },
    {
      name: "Đông Âu",
      code: "dong_au",
      category: "international",
      level: "region",
      parentCode: "chau_au",
      planned: 0,
      sold: 13,
      remaining: -13,
      opensell: 25,
      recentlyBooked: 3,
      recentlyBooked30min: 0,
      completionRate: "-",
      plannedRevenue: "18030000",
      revenue: "8230000",
      remainingRevenue: "-8230000",
      openRevenue: "18030000",
      dailyRevenue: "2300000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
    },
    {
      name: "Liên Bang Nga",
      code: "lien_bang_nga",
      category: "international",
      level: "region",
      parentCode: "chau_au",
      planned: 0,
      sold: 29,
      remaining: -29,
      opensell: 44,
      recentlyBooked: 7,
      recentlyBooked30min: 2,
      completionRate: "-",
      plannedRevenue: "247250000",
      revenue: "1716000000",
      remainingRevenue: "-1716000000",
      openRevenue: "247250000",
      dailyRevenue: "43597000",
      recentlyRevenue30min: "124562857",
      targetPercentage: "-",
    },
    {
      name: "Liên Hiệp Anh",
      code: "lien_hiep_anh",
      category: "international",
      level: "region",
      parentCode: "chau_au",
      planned: 0,
      sold: 11,
      remaining: -11,
      opensell: 14,
      recentlyBooked: 2,
      recentlyBooked30min: 1,
      completionRate: "-",
      plannedRevenue: "1277500000",
      revenue: "1112000000",
      remainingRevenue: "-1112000000",
      openRevenue: "1277500000",
      dailyRevenue: "17380000",
      recentlyRevenue30min: "8990000",
      targetPercentage: "-",
    },
    {
      name: "Nam Âu",
      code: "nam_au",
      category: "international",
      level: "region",
      parentCode: "chau_au",
      planned: 0,
      sold: 4,
      remaining: -4,
      opensell: 4,
      recentlyBooked: 1,
      recentlyBooked30min: 0,
      completionRate: "-",
      plannedRevenue: "422500000",
      revenue: "478000000",
      remainingRevenue: "-478000000",
      openRevenue: "422500000",
      dailyRevenue: "92980000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
    },
    {
      name: "Bắc Âu",
      code: "bac_au",
      category: "international",
      level: "region",
      parentCode: "chau_au",
      planned: 0,
      sold: 5,
      remaining: -5,
      opensell: 5,
      recentlyBooked: 2,
      recentlyBooked30min: 0,
      completionRate: "-",
      plannedRevenue: "43000000",
      revenue: "478250000",
      remainingRevenue: "-478250000",
      openRevenue: "43000000",
      dailyRevenue: "161980000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
    },
    {
      name: "Châu Âu - Khác",
      code: "chau_au_khac",
      category: "international",
      level: "region",
      parentCode: "chau_au",
      planned: 0,
      sold: 246,
      remaining: 0,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      plannedRevenue: "13165750000",
      revenue: "0",
      remainingRevenue: "13165750000",
      openRevenue: "0",
      dailyRevenue: "0",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
    },
    {
      name: "Bắc Mỹ",
      code: "bac_my",
      category: "international",
      level: "region",
      parentCode: "chau_my",
      planned: 0,
      sold: 33,
      remaining: -33,
      opensell: 33,
      recentlyBooked: 7,
      recentlyBooked30min: 1,
      completionRate: "-",
      plannedRevenue: "5914750000",
      revenue: "1335500000",
      remainingRevenue: "-1055000000",
      openRevenue: "1053750000",
      dailyRevenue: "175980000",
      recentlyRevenue30min: "2514000",
      targetPercentage: "-",
    },
    {
      name: "Châu Mỹ - Khác",
      code: "chau_my_khac",
      category: "international",
      level: "region",
      parentCode: "chau_my",
      planned: 98,
      sold: 0,
      remaining: 98,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      plannedRevenue: "5914750000",
      revenue: "0",
      remainingRevenue: "5914750000",
      openRevenue: "0",
      dailyRevenue: "0",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
    },
    {
      name: "Úc",
      code: "nuoc_uc",
      category: "international",
      level: "region",
      parentCode: "chau_dai_duong",
      planned: 0,
      sold: 88,
      remaining: -88,
      opensell: 93,
      recentlyBooked: 3,
      recentlyBooked30min: 1,
      completionRate: "-",
      plannedRevenue: "3288500000",
      revenue: "3616000000",
      remainingRevenue: "-3616000000",
      openRevenue: "328850000",
      dailyRevenue: "21000000",
      recentlyRevenue30min: "7000000",
      targetPercentage: "-",
    },
    {
      name: "Châu Đại Dương - Khác",
      code: "chau_dai_duong_khac",
      category: "international",
      level: "region",
      parentCode: "chau_dai_duong",
      planned: 82,
      sold: 0,
      remaining: 82,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      plannedRevenue: "2433750000",
      revenue: "0",
      remainingRevenue: "2433750000",
      openRevenue: "0",
      dailyRevenue: "0",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
    },

// International - Level 4: Tuyến Tour cụ thể (quốc gia)
// Đông Bắc Á 
    {
      name: "Trung Quốc",
      code: "trung_quoc",
      category: "international",
      level: "area",
      parentCode: "dong_bac_a",
      planned: 849,
      sold: 762,
      remaining: 87,
      opensell: 851,
      recentlyBooked: 130,
      recentlyBooked30min: 22,
      completionRate: "89.8%",
      plannedRevenue: "1409750000",
      revenue: "1418450000",
      remainingRevenue: "-92750000",
      openRevenue: "1489500000",
      dailyRevenue: "261834000",
      recentlyRevenue30min: "442765231",
      targetPercentage: "100.66%"
    },
    {
      name: "Đài Loan",
      code: "dai_loan",
      category: "international",
      level: "area",
      parentCode: "dong_bac_a",
      planned: 426,
      sold: 152,
      remaining: 274,
      opensell: 162,
      recentlyBooked: 28,
      recentlyBooked30min: 9,
      completionRate: "35.7%",
      plannedRevenue: "616750000",
      revenue: "2272250000",
      remainingRevenue: "3895250000",
      openRevenue: "2498250000",
      dailyRevenue: "401270000",
      recentlyRevenue30min: "128976943",
      targetPercentage: "36.87%"
    },
    {
      name: "Nhật Bản",
      code: "nhat_ban",
      category: "international",
      level: "area",
      parentCode: "dong_bac_a",
      planned: 306,
      sold: 223,
      remaining: 83,
      opensell: 248,
      recentlyBooked: 6,
      recentlyBooked30min: 1,
      completionRate: "72.9%",
      plannedRevenue: "725900000",
      revenue: "6612750000",
      remainingRevenue: "-646250000",
      openRevenue: "6765250000",
      dailyRevenue: "4630000",
      recentlyRevenue30min: "771667",
      targetPercentage: "91.10%"
    },
    {
      name: "Hongkong",
      code: "hongkong",
      category: "international",
      level: "area",
      parentCode: "dong_bac_a",
      planned: 72,
      sold: 88,
      remaining: -16,
      opensell: 99,
      recentlyBooked: 5,
      recentlyBooked30min: 1,
      completionRate: "122.2%",
      plannedRevenue: "946500000",
      revenue: "850250000",
      remainingRevenue: "-703750000",
      openRevenue: "172700000",
      dailyRevenue: "8590000",
      recentlyRevenue30min: "1798000",
      targetPercentage: "174.25%"
    },
    {
      name: "Hàn Quốc",
      code: "han_quoc",
      category: "international",
      level: "area",
      parentCode: "dong_bac_a",
      planned: 402,
      sold: 372,
      remaining: 30,
      opensell: 415,
      recentlyBooked: 79,
      recentlyBooked30min: 9,
      completionRate: "92.5%",
      plannedRevenue: "5693250000",
      revenue: "6028000000",
      remainingRevenue: "-334750000",
      openRevenue: "6205000000",
      dailyRevenue: "170476500",
      recentlyRevenue30min: "194864639",
      targetPercentage: "105.88%"
    },
  /// Đông Nam Á
    {
      name: "Thái Lan",
      code: "thai_lan",
      category: "international",
      level: "area",
      parentCode: "dong_nam_a",
      planned: 1663,
      sold: 225,
      remaining: 1438,
      opensell: 417,
      recentlyBooked: 37,
      recentlyBooked30min: 5,
      completionRate: "13.5%",
      plannedRevenue: "10430250000",
      revenue: "1944000000",
      remainingRevenue: "10486250000",
      openRevenue: "2966800000",
      dailyRevenue: "27738000",
      recentlyRevenue30min: "3754435",
      targetPercentage: "15.64%"
    },
    {
      name: "Singapore - Malaysia",
      code: "singapore_malaysia",
      category: "international",
      level: "area",
      parentCode: "dong_nam_a",
      planned: 427,
      sold: 292,
      remaining: 135,
      opensell: 321,
      recentlyBooked: 20,
      recentlyBooked30min: 4,
      completionRate: "68.4%",
      plannedRevenue: "516050000",
      revenue: "427750000",
      remainingRevenue: "883000000",
      openRevenue: "420750000",
      dailyRevenue: "3016000",
      recentlyRevenue30min: "60200000",
      targetPercentage: "83.89%"
    },
    {
      name: "Indonesia",
      code: "indonesia",
      category: "international",
      level: "area",
      parentCode: "dong_nam_a",
      planned: 45,
      sold: 62,
      remaining: -17,
      opensell: 69,
      recentlyBooked: 4,
      recentlyBooked30min: 1,
      completionRate: "137.6%",
      plannedRevenue: "90575000",
      revenue: "56160000",
      remainingRevenue: "145400000",
      openRevenue: "96250000",
      dailyRevenue: "56160000",
      recentlyRevenue30min: "14540000",
      targetPercentage: "162.83%"
    },
    {
      name: "Lào",
      code: "lao",
      category: "international",
      level: "area",
      parentCode: "dong_nam_a",
      planned: 33,
      sold: 16,
      remaining: 17,
      opensell: 31,
      recentlyBooked: 4,
      recentlyBooked30min: 1,
      completionRate: "48.5%",
      plannedRevenue: "37300000",
      revenue: "5116000",
      remainingRevenue: "157750000",
      openRevenue: "21250000",
      dailyRevenue: "5116000",
      recentlyRevenue30min: "12798000",
      targetPercentage: "57.71%"
    },
    {
      name: "Singapore",
      code: "singapore",
      category: "international",
      level: "area",
      parentCode: "dong_nam_a",
      planned: 89,
      sold: 70,
      remaining: 19,
      opensell: 81,
      recentlyBooked: 9,
      recentlyBooked30min: 3,
      completionRate: "78.7%",
      plannedRevenue: "105275000",
      revenue: "13143000",
      remainingRevenue: "-55750000",
      openRevenue: "123675000",
      dailyRevenue: "13143000",
      recentlyRevenue30min: "4381333",
      targetPercentage: "105.30%"
    },
    {
      name: "Campuchia",
      code: "campuchia",
      category: "international",
      level: "area",
      parentCode: "dong_nam_a",
      planned: 133,
      sold: 3,
      remaining: 130,
      opensell: 12,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "2.3%",
      plannedRevenue: "67075000",
      revenue: "1800000",
      remainingRevenue: "65275000",
      openRevenue: "1375000",
      dailyRevenue: "0",
      recentlyRevenue30min: "0",
      targetPercentage: "2.68%"
    },
    {
      name: "Philippines",
      code: "philippines",
      category: "international",
      level: "area",
      parentCode: "dong_nam_a",
      planned: 6,
      sold: 0,
      remaining: 6,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      plannedRevenue: "6000000",
      revenue: "0",
      remainingRevenue: "6000000",
      openRevenue: "0",
      dailyRevenue: "0",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%"
    },

  // Tây Á + Nam Á
    {
      name: "UAE (Dubai - Abu Dhabi)",
      code: "uae_dubai_abu_dhabi",
      category: "international",
      level: "area",
      parentCode: "tay_a_trung_dong",
      planned: 23,
      sold: 20,
      remaining: 3,
      opensell: 21,
      recentlyBooked: 8,
      recentlyBooked30min: 3,
      completionRate: "87.0%",
      plannedRevenue: "821250000",
      revenue: "569000000",
      remainingRevenue: "252250000",
      openRevenue: "526750000",
      dailyRevenue: "270920000",
      recentlyRevenue30min: "101595000",
      targetPercentage: "69.28%"
    },
    {
      name: "Ấn Độ",
      code: "an_do",
      category: "international",
      level: "area",
      parentCode: "nam_a",
      planned: 7,
      sold: 6,
      remaining: 1,
      opensell: 7,
      recentlyBooked: 2,
      recentlyBooked30min: 1,
      completionRate: "85.7%",
      plannedRevenue: "120000000",
      revenue: "134750000",
      remainingRevenue: "-13750000",
      openRevenue: "142500000",
      dailyRevenue: "41980000",
      recentlyRevenue30min: "20980000",
      targetPercentage: "111.36%"
    },

  // Châu Âu
    {
      name: "Liên Tuyến Tây Âu",
      code: "lien_tuyen_tay_au",
      category: "international",
      level: "area",
      parentCode: "tay_au",
      planned: 0,
      sold: 68,
      remaining: -68,
      opensell: 70,
      recentlyBooked: 4,
      recentlyBooked30min: 1,
      completionRate: "-",
      plannedRevenue: "0",
      revenue: "526925000",
      remainingRevenue: "-526925000",
      openRevenue: "408500000",
      dailyRevenue: "26396000",
      recentlyRevenue30min: "65990000",
      targetPercentage: "-",
    },
    {
      name: "Pháp",
      code: "phap",
      category: "international",
      level: "area",
      parentCode: "tay_au",
      planned: 0,
      sold: 52,
      remaining: -52,
      opensell: 110,
      recentlyBooked: 1,
      recentlyBooked30min: 0,
      completionRate: "-",
      plannedRevenue: "0",
      revenue: "255325000",
      remainingRevenue: "-255325000",
      openRevenue: "555550000",
      dailyRevenue: "3285000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
    },
    {
      name: "Pháp - Thụy Sĩ - Ý",
      code: "phap_thuy_si_y",
      category: "international",
      level: "area",
      parentCode: "tay_au",
      planned: 0,
      sold: 4,
      remaining: -4,
      opensell: 15,
      recentlyBooked: 1,
      recentlyBooked30min: 0,
      completionRate: "-",
      plannedRevenue: "0",
      revenue: "42125000",
      remainingRevenue: "-42125000",
      openRevenue: "12075000",
      dailyRevenue: "7990000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
    },
    {
      name: "Nga",
      code: "nga",
      category: "international",
      level: "area",
      parentCode: "lien_bang_nga",
      planned: 0,
      sold: 29,
      remaining: -29,
      opensell: 44,
      recentlyBooked: 7,
      recentlyBooked30min: 2,
      completionRate: "-",
      plannedRevenue: "0",
      revenue: "1726000000",
      remainingRevenue: "-1726000000",
      openRevenue: "248725000",
      dailyRevenue: "43597000",
      recentlyRevenue30min: "124562857",
      targetPercentage: "-",
    },
    {
      name: "Liên Tuyến Đông Âu",
      code: "lien_tuyen_dong_au",
      category: "international",
      level: "area",
      parentCode: "dong_au",
      planned: 0,
      sold: 13,
      remaining: -13,
      opensell: 25,
      recentlyBooked: 3,
      recentlyBooked30min: 0,
      completionRate: "-",
      plannedRevenue: "0",
      revenue: "82300000",
      remainingRevenue: "-82300000",
      openRevenue: "18030000",
      dailyRevenue: "2300000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
    },
    {
      name: "Liên Tuyến Nam Âu",
      code: "lien_tuyen_nam_au",
      category: "international",
      level: "area",
      parentCode: "nam_au",
      planned: 0,
      sold: 4,
      remaining: -4,
      opensell: 4,
      recentlyBooked: 1,
      recentlyBooked30min: 0,
      completionRate: "-",
      plannedRevenue: "0",
      revenue: "478000000",
      remainingRevenue: "-478000000",
      openRevenue: "422500000",
      dailyRevenue: "92980000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
    },
    {
      name: "Liên Tuyến Bắc Âu",
      code: "lien_tuyen_bac_au",
      category: "international",
      level: "area",
      parentCode: "bac_au",
      planned: 0,
      sold: 5,
      remaining: -5,
      opensell: 5,
      recentlyBooked: 2,
      recentlyBooked30min: 0,
      completionRate: "-",
      plannedRevenue: "0",
      revenue: "478250000",
      remainingRevenue: "-478250000",
      openRevenue: "43000000",
      dailyRevenue: "16198000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
    },
    {
      name: "Anh",
      code: "anh",
      category: "international",
      level: "area",
      parentCode: "lien_hiep_anh",
      planned: 0,
      sold: 11,
      remaining: -11,
      opensell: 14,
      recentlyBooked: 2,
      recentlyBooked30min: 1,
      completionRate: "-",
      plannedRevenue: "0",
      revenue: "1112000000",
      remainingRevenue: "-1112000000",
      openRevenue: "1277500000",
      dailyRevenue: "17380000",
      recentlyRevenue30min: "8990000",
      targetPercentage: "-",
    },
    {
      name: "Châu Âu - Khác",
      code: "lien_tuyen_chau_au_khac",
      category: "international",
      level: "area",
      parentCode: "chau_au_khac",
      planned: 246,
      sold: 0,
      remaining: 246,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      plannedRevenue: "13165750000",
      revenue: "0",
      remainingRevenue: "13165750000",
      openRevenue: "0",
      dailyRevenue: "0",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
    },
  // Châu Đại Dương
  
    {
      name: "Úc",
      code: "uc",
      category: "international",
      level: "area",
      parentCode: "nuoc_uc",
      planned: 0,
      sold: 88,
      remaining: -88,
      opensell: 93,
      recentlyBooked: 3,
      recentlyBooked30min: 1,
      completionRate: "-",
      plannedRevenue: "3616000000",
      revenue: "3288500000",
      remainingRevenue: "-3616000000",
      openRevenue: "3288500000",
      dailyRevenue: "21000000",
      recentlyRevenue30min: "7000000",
      targetPercentage: "-",
    },
    {
      name: "Châu Đại Dương - Khác",
      code: "lien_tuyen_chau_dai_duong_khac",
      category: "international",
      level: "area",
      parentCode: "chau_dai_duong_khac",
      planned: 82,
      sold: 0,
      remaining: 82,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      plannedRevenue: "2433750000",
      revenue: "0",
      remainingRevenue: "2433750000",
      openRevenue: "0",
      dailyRevenue: "0",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
    },


  // Châu Mỹ
    {
      name: "Mỹ",
      code: "my",
      category: "international",
      level: "area",
      parentCode: "bac_my",
      planned: 0,
      sold: 33,
      remaining: -33,
      opensell: 33,
      recentlyBooked: 7,
      recentlyBooked30min: 1,
      completionRate: "-",
      plannedRevenue: "0",
      revenue: "1335500000",
      remainingRevenue: "-1053500000",
      openRevenue: "1053750000",
      dailyRevenue: "175980000",
      recentlyRevenue30min: "2514000",
      targetPercentage: "-",
    },
    {
      name: "Châu Mỹ - Khác",
      code: "chau_my_khac",
      category: "international",
      level: "area",
      parentCode: "chau_my_khac",
      planned: 98,
      sold: 0,
      remaining: 98,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      plannedRevenue: "5914750000",
      revenue: "0",
      remainingRevenue: "5914750000",
      openRevenue: "0",
      dailyRevenue: "0",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
    },

// Domestic - Geographic Regions (Level 1) - Tổng 30min = 6+4+2 = 12
{
name: "Nội Địa",
code: "noi_dia",
category: "domestic",
level: "geo_region",
parentCode: null,
planned: 3281,
sold: 3022,
remaining: 259,
opensell: 3418,
recentlyBooked: 403,
recentlyBooked30min: 67,
completionRate: "92.1",
plannedRevenue: "1555750000",
revenue: "16036250000",
remainingRevenue: "480500000",
openRevenue: "1515700000",
recentlyRevenue: "1778951308",
recentlyRevenue30min: "296491884.7",
targetPercentage: "97"
},

// Domestic - Regional Areas (Level 2) - 30min: Miền Bắc = 2+2+2 = 6, Miền Trung = 2+2 = 4, Miền Nam = 1+1 = 2

  {
  name: "MIỀN TRUNG - TÂY NGUYÊN",
  code: "mien_trung",
  category: "domestic",
  level: "region",
  parentCode: "noi_dia",
  planned: 1335,
  sold: 1501,
  remaining: -166,
  opensell: 1744,
  recentlyBooked: 295,
  recentlyBooked30min: 42,
  completionRate: "112.4",
  plannedRevenue: "705500000",
  revenue: "7649250000",
  remainingRevenue: "-593750000", // Value not available in the image
  openRevenue: "7547750000",
  recentlyRevenue: "175425208",
  recentlyRevenue30min: "175425208", // Value not available in the image
  targetPercentage: "108.42%",
  },
  {
  name: "MIỀN NAM",
  code: "mien_nam",
  category: "domestic",
  level: "region",
  parentCode: "noi_dia",
  planned: 578,
  sold: 852,
  remaining: -274,
  opensell: 936,
  recentlyBooked: 48,
  recentlyBooked30min: 7,
  completionRate: "147.4",
  plannedRevenue: "265850000",
  revenue: "3228250000",
  remainingRevenue: "-571750000", // Value not available in the image
  openRevenue: "3017750000",
  recentlyRevenue: "14252572",
  recentlyRevenue30min: "14252572", // Value not available in the image
  targetPercentage: "121.52%",
  },
  {
  name: "MIỀN BẮC",
  code: "mien_bac",
  category: "domestic",
  level: "region",
  parentCode: "noi_dia",
  planned: 1313,
  sold: 615,
  remaining: 698,
  opensell: 648,
  recentlyBooked: 31,
  recentlyBooked30min: 3,
  completionRate: "46.8",
  plannedRevenue: "590400000",
  revenue: "438550000",
  remainingRevenue: "1518500000", 
  openRevenue: "419200000",
  recentlyRevenue: "29018882",
  recentlyRevenue30min: "29018882", 
  targetPercentage: "74.28",
  },

// Domestic - Specific Areas (Level 3) - Đã tính toán chính xác
// Miền Bắc: 8.000 (kế hoạch) = 3.752 + 2.500 + 1.748, 6.200 (đã bán) = 2.845 + 1.890 + 1.465 = 6.200
  {
  name: "Tây Nguyên",
  code: "tay_nguyen",
  category: "domestic",
  level: "area",
  parentCode: "mien_trung",
  planned: 197,
  sold: 212,
  remaining: -15,
  opensell: 217,
  recentlyBooked: 207,
  recentlyBooked30min: 21,
  completionRate: "107.6",
  plannedRevenue: "867250000",
  revenue: "952750000",
  remainingRevenue: "-85500000",
  openRevenue: "964750000",
  recentlyRevenue: "764947968",
  recentlyRevenue30min: "77633417",
  targetPercentage: "109.96"
  },
  {
  name: "Bắc Trung Bộ",
  code: "bac_trung_bo",
  category: "domestic",
  level: "area",
  parentCode: "mien_trung",
  planned: 555,
  sold: 586,
  remaining: -31,
  opensell: 628,
  recentlyBooked: 50,
  recentlyBooked30min: 10,
  completionRate: "105.6",
  plannedRevenue: "3643750000",
  revenue: "3906500000",
  remainingRevenue: "-262750000",
  openRevenue: "3636000000",
  recentlyRevenue: "198052500",
  recentlyRevenue30min: "44201791",
  targetPercentage: "107.21"
  },
  {
  name: "Liên Tuyến Miền Trung",
  code: "lien_tuyen_mien_trung",
  category: "domestic",
  level: "area",
  parentCode: "mien_trung",
  planned: 149,
  sold: 187,
  remaining: -38,
  opensell: 222,
  recentlyBooked: 27,
  recentlyBooked30min: 9,
  completionRate: "125.5",
  plannedRevenue: "758000000",
  revenue: "550000000",
  remainingRevenue: "208000000",
  openRevenue: "550750000",
  recentlyRevenue: "120870000",
  recentlyRevenue30min: "40290000",
  targetPercentage: "72.56"
  },
  {
  name: "Nam Trung Bộ",
  code: "nam_trung_bo",
  category: "domestic",
  level: "area",
  parentCode: "mien_trung",
  planned: 434,
  sold: 516,
  remaining: -82,
  opensell: 677,
  recentlyBooked: 11,
  recentlyBooked30min: 2,
  completionRate: "118.9",
  plannedRevenue: "1786500000",
  revenue: "2396250000",
  remainingRevenue: "-453500000",
  openRevenue: "2396250000",
  recentlyRevenue: "41000000",
  recentlyRevenue30min: "13330000",
  targetPercentage: "125.38"
  },
  {
  name: "Tây Nam Bộ",
  code: "tay_nam_bo",
  category: "domestic",
  level: "area",
  parentCode: "mien_nam",
  planned: 451,
  sold: 686,
  remaining: -235,
  opensell: 753,
  recentlyBooked: 24,
  recentlyBooked30min: 4,
  completionRate: "152.1",
  plannedRevenue: "2358000000",
  revenue: "2755250000",
  remainingRevenue: "-397250000",
  openRevenue: "2567250000",
  recentlyRevenue: "55823440",
  recentlyRevenue30min: "9230572",
  targetPercentage: "116.85"
  },
  {
  name: "Đồng Nam Bộ",
  code: "dong_nam_bo",
  category: "domestic",
  level: "area",
  parentCode: "mien_nam",
  planned: 127,
  sold: 166,
  remaining: -39,
  opensell: 183,
  recentlyBooked: 24,
  recentlyBooked30min: 3,
  completionRate: "130.7",
  plannedRevenue: "298500000",
  revenue: "473000000",
  remainingRevenue: "-174500000",
  openRevenue: "450250000",
  recentlyRevenue: "48096000",
  recentlyRevenue30min: "5122000",
  targetPercentage: "158.46"
  },
  {
  name: "Đồng Bằng Sông Hồng & Duyên Hải",
  code: "dbsh_dh",
  category: "domestic",
  level: "area",
  parentCode: "mien_bac",
  planned: 14,
  sold: 478,
  remaining: -464,
  opensell: 508,
  recentlyBooked: 21,
  recentlyBooked30min: 2,
  completionRate: "3414.3",
  plannedRevenue: "38250000",
  revenue: "3374250000",
  remainingRevenue: "-3336000000",
  openRevenue: "3271750000",
  recentlyRevenue: "174348840",
  recentlyRevenue30min: "20528882",
  targetPercentage: "8821.57"
  },
  {
  name: "Tây Bắc",
  code: "tay_bac",
  category: "domestic",
  level: "area",
  parentCode: "mien_bac",
  planned: 13,
  sold: 90,
  remaining: -77,
  opensell: 94,
  recentlyBooked: 1,
  recentlyBooked30min: 0,
  completionRate: "692.3",
  plannedRevenue: "65250000",
  revenue: "553500000",
  remainingRevenue: "-488250000",
  openRevenue: "501750000",
  recentlyRevenue: "13090000",
  recentlyRevenue30min: "0",
  targetPercentage: "848.28"
  },
  {
  name: "Đông Bắc",
  code: "dong_bac",
  category: "domestic",
  level: "area",
  parentCode: "mien_bac",
  planned: 15,
  sold: 47,
  remaining: -32,
  opensell: 46,
  recentlyBooked: 9,
  recentlyBooked30min: 1,
  completionRate: "313.3",
  plannedRevenue: "49250000",
  revenue: "457750000",
  remainingRevenue: "-408500000",
  openRevenue: "418750000",
  recentlyRevenue: "72810000",
  recentlyRevenue30min: "8490000",
  targetPercentage: "929.44"
  },
  {
  name: "Liên Tỉnh Miền Bắc",
  code: "lien_tinh_mien_bac",
  category: "domestic",
  level: "area",
  parentCode: "mien_bac",
  planned: 1271,
  sold: 0,
  remaining: 1271,
  opensell: 0,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "0.0%",
  plannedRevenue: "5751250000",
  revenue: "0",
  remainingRevenue: "-5751250000",
  openRevenue: "0",
  recentlyRevenue: "0",
  recentlyRevenue30min: "0",
  targetPercentage: "0.00%"
  }

];
hierarchyData.forEach(levelData => {
const level: HierarchyLevel = {
id: randomUUID(),
name: levelData.name,
category: levelData.category,
code: levelData.code,
level: levelData.level,
parentCode: levelData.parentCode || null,
planned: levelData.planned || 0,
sold: levelData.sold || 0,
opensell: levelData.opensell || 0,
remaining: levelData.remaining || 0,
recentlyBooked: levelData.recentlyBooked || 0,
recentlyBooked30min: levelData.recentlyBooked30min || 0,
completionRate: levelData.completionRate || "0",
revenue: levelData.revenue || "0",
openRevenue: levelData.openRevenue || "0",
plannedRevenue: levelData.plannedRevenue || "0",
targetPercentage: levelData.targetPercentage || "0"
};
this.hierarchyLevels.set(level.id, level);
});
// Initialize tours with new structure
const toursData: InsertTour[] = [
// Domestic Tours - Individual Tours (Level 4)
  {
  name: "Nghệ An",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 1,
  remaining: -1,
  opensell: 26,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "-",
  dailyRevenue: "3250000",
  revenue: "119750000",
  plannedRevenue: "0",
  openRevenue: "119750000",
  remainingRevenue : "-3250000",
  recentlyRevenue30min: null,
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Đà Nẵng",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 212,
  remaining: -212,
  opensell: 229,
  recentlyBooked: 35,
  recentlyBooked30min: 6,
  completionRate: "-",
  dailyRevenue: "853925000",
  revenue: "12187500000",
  plannedRevenue: "0",
  openRevenue: "11675000000",
  remainingRevenue : "-12187500000",
  recentlyRevenue30min: "14638714",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Đà Nẵng - Huế - Quảng Bình",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 140,
  remaining: -140,
  opensell: 137,
  recentlyBooked: 2,
  recentlyBooked30min: 0,
  completionRate: "-",
  dailyRevenue: "165800000",
  revenue: "12605000000",
  plannedRevenue: "0",
  openRevenue: "10660000000",
  remainingRevenue : "-12605000000",
  recentlyRevenue30min: "-12605000000",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Đà Nẵng - Huế - Quảng Bình",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 129,
  remaining: -129,
  opensell: 129,
  recentlyBooked: 13,
  recentlyBooked30min: 4,
  completionRate: "-",
  dailyRevenue: "96080000",
  revenue: "11102500000",
  plannedRevenue: "0",
  openRevenue: "9525000000",
  remainingRevenue : "-11102500000",
  recentlyRevenue30min: "2953077",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Huế",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 37,
  remaining: -37,
  opensell: 38,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "-",
  dailyRevenue: "39500000",
  revenue: "432500000",
  plannedRevenue: "0",
  openRevenue: "432500000",
  remainingRevenue : "-39500000",
  recentlyRevenue30min: "0",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Quảng Nam",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 22,
  remaining: -22,
  opensell: 24,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "-",
  dailyRevenue: "41750000",
  revenue: "505000000",
  plannedRevenue: "0",
  openRevenue: "505000000",
  remainingRevenue : "-41750000",
  recentlyRevenue30min: "0",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Đà Nẵng - Huế",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 23,
  remaining: -23,
  opensell: 23,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "-",
  dailyRevenue: "1240000000",
  revenue: "1242500000",
  plannedRevenue: "0",
  openRevenue: "1242500000",
  remainingRevenue : "-1240000000",
  recentlyRevenue30min: "0",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Quảng Bình",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 17,
  remaining: -17,
  opensell: 17,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "-",
  dailyRevenue: "1010000000",
  revenue: "1037500000",
  plannedRevenue: "0",
  openRevenue: "1037500000",
  remainingRevenue : "-1010000000",
  recentlyRevenue30min: "0",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Thanh Hóa",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 2,
  remaining: -2,
  opensell: 2,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "-",
  dailyRevenue: "4500000",
  revenue: "52500000",
  plannedRevenue: "0",
  openRevenue: "52500000",
  remainingRevenue : "-4500000",
  recentlyRevenue30min: "0",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Quảng Ngãi",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 2,
  remaining: -2,
  opensell: 2,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "-",
  dailyRevenue: "2250000",
  revenue: "27500000",
  plannedRevenue: "0",
  openRevenue: "27500000",
  remainingRevenue : "-2250000",
  recentlyRevenue30min: "0",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Hà Tĩnh",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 1,
  remaining: -1,
  opensell: 1,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "-",
  dailyRevenue: "750000",
  revenue: "7500000",
  plannedRevenue: "0",
  openRevenue: "7500000",
  remainingRevenue : "-750000",
  recentlyRevenue30min: "0",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "MIỀN TRUNG - TÂY NGUYÊN - KHÁC",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 555,
  sold: 0,
  remaining: 555,
  opensell: 0,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "0.0",
  dailyRevenue: "0",
  revenue: "0",
  plannedRevenue: "3643750000",
  openRevenue: "3643750000",
  remainingRevenue: "0",
  recentlyRevenue30min: "0",
  targetPercentage: "0.00",
  topSalesUnit: "HCM"
  },
  {
  name: "Nghệ An - Hà Tĩnh",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "bac_trung_bo",
    imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 0,
  remaining: 0,
  opensell: 0,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "0",
  dailyRevenue: "0",
  revenue: "0",
  plannedRevenue: "0",
  openRevenue: "0",
  remainingRevenue : "0",
  recentlyRevenue30min: "0",
  targetPercentage: "0",
  topSalesUnit: "HCM"
  },

/// Nam Trung Bộ
    {
      name: "Khánh Hòa",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "nam_trung_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 179,
      sold: 216,
      remaining: -37,
      opensell: 349,
      recentlyBooked: 1,
      recentlyBooked30min: 0,
      completionRate: "120.7%",
      dailyRevenue: "5600000",
      revenue: "8575000000",
      plannedRevenue: "6705000000",
      openRevenue: "9087500000",
      remainingRevenue : "5600000",
      recentlyRevenue30min: "0",
      remainingRevenue: "-187000000",
      targetPercentage: "127.89%",
      topSalesUnit: "HCM"
    },
    {
      name: "Bình Định",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "nam_trung_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 98,
      sold: 112,
      remaining: -14,
      opensell: 127,
      recentlyBooked: 2,
      recentlyBooked30min: 1,
      completionRate: "114.3%",
      dailyRevenue: "13600000",
      revenue: "7865000000",
      plannedRevenue: "5655000000",
      openRevenue: "8160000000",
      remainingRevenue : "13600000",
      recentlyRevenue30min: "640000",
      remainingRevenue: "-230000000",
      targetPercentage: "141.33%",
      topSalesUnit: "HCM"
    },
    {
      name: "Bình Thuận",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "nam_trung_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=300",
      planned: 95,
      sold: 96,
      remaining: -1,
      opensell: 100,
      recentlyBooked: 2,
      recentlyBooked30min: 0,
      completionRate: "101.1%",
      dailyRevenue: "7380000",
      revenue: "2685000000",
      plannedRevenue: "3055000000",
      openRevenue: "3002500000",
      remainingRevenue : "7380000",
      recentlyRevenue30min: "0",
      remainingRevenue: "37000000",
      targetPercentage: "87.89%",
      topSalesUnit: "HCM"
    },
    {
      name: "Ninh Thuận",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "nam_trung_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 40,
      sold: 70,
      remaining: -30,
      opensell: 75,
      recentlyBooked: 4,
      recentlyBooked30min: 0,
      completionRate: "175.0%",
      dailyRevenue: "13600000",
      revenue: "1697500000",
      plannedRevenue: "1015000000",
      openRevenue: "1977500000",
      remainingRevenue : "13600000",
      recentlyRevenue30min: "0",
      remainingRevenue: "-68250000",
      targetPercentage: "167.24%",
      topSalesUnit: "HCM"
    },
    {
      name: "Bình Định - Phú Yên",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "nam_trung_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 19,
      remaining: -19,
      opensell: 20,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0",
      dailyRevenue: "1502500000",
      revenue: "1610000000",
      plannedRevenue: "0",
      openRevenue: "1502500000",
      remainingRevenue : "1502500000",
      recentlyRevenue30min: "0",
      remainingRevenue: "-150250000",
      targetPercentage: "0",
      topSalesUnit: "HCM"
    },
    {
      name: "Khánh Hòa - Phú Yên",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "mien_trung",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 19,
      remaining: -19,
      opensell: 19,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0",
      dailyRevenue: "902500000",
      revenue: "897500000",
      plannedRevenue: "0",
      openRevenue: "897500000",
      remainingRevenue : "902500000",
      recentlyRevenue30min: "0",
      remainingRevenue: "0",
      targetPercentage: "0",
      topSalesUnit: "HCM"
    },
    {
      name: "Phú Yên",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "nam_trung_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 3,
      remaining: -3,
      opensell: 6,
      recentlyBooked: 2,
      recentlyBooked30min: 1,
      completionRate: "0",
      dailyRevenue: "12980000",
      revenue: "7500000",
      plannedRevenue: "0",
      openRevenue: "12500000",
      remainingRevenue : "12980000",
      recentlyRevenue30min: "6490000",
      remainingRevenue: "-7500000",
      targetPercentage: "0",
      topSalesUnit: "HCM"
    },
    {
      name: "MIỀN TRUNG - TÂY NGUYÊN - KHÁC",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "nam_trung_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 22,
      sold: 0,
      remaining: 22,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      dailyRevenue: "0",
      revenue: "0",
      plannedRevenue: "1525000000",
      openRevenue: "1525000000",
      remainingRevenue : "0",
      recentlyRevenue30min: "0",
      remainingRevenue: "152500000",
      targetPercentage: "0.00%",
      topSalesUnit: "HCM"
    },

  
/// Tây Nguyên
  {
  name: "Lâm Đồng",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "tay_nguyen",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 104,
  sold: 165,
  remaining: -61,
  recentlyBooked: 169,
  recentlyBooked30min: 21,
  completionRate: "158.7",
  dailyRevenue: "764947968",
  revenue: "7185000000",
  plannedRevenue: "3895000000",
  openRevenue: "739500000",
  recentlyRevenue30min: "77603477",
  targetPercentage: "184.47",
  topSalesUnit: "HCM"
  },
  {
  name: "Đăk Lăk - Pleiku - Kontum",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "tay_nguyen",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 43,
  remaining: -43,
  recentlyBooked: 44,
  recentlyBooked30min: 0,
  completionRate: "0",
  dailyRevenue: "0",
  revenue: "2280000000",
  plannedRevenue: "0",
  openRevenue: "218750000",
  recentlyRevenue30min: "0",
  targetPercentage: "0",
  topSalesUnit: "HCM"
  },
  {
  name: "Gia Lai",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "tay_nguyen",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 2,
  remaining: -2,
  recentlyBooked: 2,
  recentlyBooked30min: 0,
  completionRate: "0",
  dailyRevenue: "0",
  revenue: "4000000",
  plannedRevenue: "0",
  openRevenue: "4000000",
  recentlyRevenue30min: "-4000000",
  targetPercentage: "-",
  topSalesUnit: "HCM"
  },
  {
  name: "Lâm Đồng Đà Lạt",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "tay_nguyen",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 49,
  sold: 2,
  remaining: 47,
  recentlyBooked: 2,
  recentlyBooked30min: 0,
  completionRate: "4.1",
  dailyRevenue: "0",
  revenue: "2250000",
  plannedRevenue: "2542500000",
  openRevenue: "2500000",
  recentlyRevenue30min: "0",
  targetPercentage: "0.88",
  topSalesUnit: "HCM"
  },  
  {
  name: "MIEN TRUNG - TÂY NGUYEN - Khác",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "tay_nguyen",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 44,
  sold: 0,
  remaining: 44,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "0.0",
  dailyRevenue: "0",
  revenue: "0",
  plannedRevenue: "2235000000",
  openRevenue: "0",
  recentlyRevenue30min: "0",
  targetPercentage: "0.00",
  topSalesUnit: "HCM"
  },

  {
  name: "Liên tuyến Miền Trung - Tây Nguyên",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "lien_tuyen_mien_trung",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 181,
  remaining: -181,
  recentlyBooked: 27,
  recentlyBooked30min: 9,
  completionRate: "0",
  dailyRevenue: "12087000",
  revenue: "4991250000",
  plannedRevenue: "0",
  opensell: "216",
  openRevenue: "4977500000",
  remainingRevenue : "-4991250000",
  recentlyRevenue30min: "40290000",
  targetPercentage: "0",
  topSalesUnit: "HCM"
  },
  {
  name: "Liên tuyến Bắc Trung Bộ - Nam Trung Bộ",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "lien_tuyen_mien_trung",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 0,
  sold: 6,
  remaining: -6,
  recentlyBooked: 6,
  recentlyBooked30min: 0,
  completionRate: "0",
  dailyRevenue: "50750000",
  opensell: "6",
  revenue: "53000000",
  plannedRevenue: "0",
  openRevenue: "53000000",
  remainingRevenue : "-50750000",
  recentlyRevenue30min: "0",
  targetPercentage: "0",
  topSalesUnit: "HCM"
  },
  {
  name: "MIỀN TRUNG - TÂY NGUYÊN - Khác",
  category: "domestic",
  continent: null,
  geoRegion: "noi_dia",
  area: "lien_tuyen_mien_trung",
  imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
  planned: 149,
  sold: 0,
  remaining: 149,
  recentlyBooked: 0,
  recentlyBooked30min: 0,
  completionRate: "0.0",
  dailyRevenue: "0",
  revenue: "0",
  plannedRevenue: "758000000",
  openRevenue: "758000000",
  opensell: "0",
  remainingRevenue : "758000000",
  recentlyRevenue30min: "0",
  targetPercentage: "0.00",
  topSalesUnit: "HCM"
  },


  /// Đồng Bằng Sông Hồng
    {
      name: "Hà Nội",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dbsh_dh",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 162,
      remaining: -162,
      opensell: 169,
      recentlyBooked: 4,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "1110000",
      revenue: "558750000",
      plannedRevenue: "0",
      openRevenue: "462750000",
      remainingRevenue: "-558750000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Hà Nội - Quảng Ninh - Ninh Bình",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dbsh_dh",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 126,
      remaining: -126,
      opensell: 128,
      recentlyBooked: 9,
      recentlyBooked30min: 1,
      completionRate: "-",
      dailyRevenue: "80310000",
      revenue: "1144250000",
      plannedRevenue: "0",
      openRevenue: "983750000",
      remainingRevenue: "-1144250000",
      recentlyRevenue30min: "8623333",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Quảng Ninh - Ninh Bình",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dbsh_dh",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 121,
      remaining: -121,
      opensell: 124,
      recentlyBooked: 7,
      recentlyBooked30min: 1,
      completionRate: "-",
      dailyRevenue: "81238840",
      revenue: "1400750000",
      plannedRevenue: "0",
      openRevenue: "1378500000",
      remainingRevenue: "-1400750000",
      recentlyRevenue30min: "11805549",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Quảng Ninh",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dbsh_dh",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 43,
      remaining: -43,
      opensell: 55,
      recentlyBooked: 1,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "1700000",
      revenue: "157750000",
      plannedRevenue: "0",
      openRevenue: "221125000",
      remainingRevenue: "-157750000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Hải Phòng",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dbsh_dh",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 17,
      remaining: -17,
      opensell: 17,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "0",
      revenue: "36750000",
      plannedRevenue: "0",
      openRevenue: "39000000",
      remainingRevenue: "-36750000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Ninh Bình",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dbsh_dh",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 3,
      remaining: -3,
      opensell: 9,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "0",
      revenue: "19250000",
      plannedRevenue: "0",
      openRevenue: "123250000",
      remainingRevenue: "-19250000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Hà Nội - Quảng Ninh",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dbsh_dh",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 3,
      remaining: -3,
      opensell: 3,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "29000000",
      revenue: "28500000",
      plannedRevenue: "0",
      openRevenue: "29000000",
      remainingRevenue: "-28500000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Hà Nội - Lào Cai - Quảng Ninh",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dbsh_dh",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 3,
      remaining: -3,
      opensell: 3,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "28250000",
      revenue: "34000000",
      plannedRevenue: "0",
      openRevenue: "28250000",
      remainingRevenue: "-28250000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "MIỀN BẮC - Khác",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dbsh_dh",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 14,
      sold: 0,
      remaining: 14,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      dailyRevenue: "0",
      revenue: "0",
      plannedRevenue: "38250000",
      openRevenue: "0",
      remainingRevenue: "38250000",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
      topSalesUnit: "HCM"
    },
  /// Tây Bắc
    {
      name: "Lào Cai",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 66,
      remaining: -66,
      opensell: 69,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "307250000",
      revenue: "303000000",
      plannedRevenue: "0",
      openRevenue: "303000000",
      remainingRevenue: "-307250000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Yên Bái - Lào Cai - Lai Châu - Điện Biên - Sơn La",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 17,
      remaining: -17,
      opensell: 17,
      recentlyBooked: 1,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "13080000",
      revenue: "19350000",
      plannedRevenue: "0",
      openRevenue: "14350000",
      remainingRevenue: "-19350000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Hà Nội - Lào Cai",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 6,
      remaining: -6,
      opensell: 6,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "49500000",
      revenue: "50750000",
      plannedRevenue: "0",
      openRevenue: "50750000",
      remainingRevenue: "-49500000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Điện Biên",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 1,
      remaining: -1,
      opensell: 2,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "3250000",
      revenue: "4500000",
      plannedRevenue: "0",
      openRevenue: "4500000",
      remainingRevenue: "-3250000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "MIỀN BẮC - Khác",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 13,
      sold: 0,
      remaining: 13,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      dailyRevenue: "0",
      revenue: "0",
      plannedRevenue: "65250000",
      openRevenue: "0",
      remainingRevenue: "65250000",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
      topSalesUnit: "HCM"
    },
// Đông Bắc
    {
      name: "Hà Giang - Cao Bằng - Bắc Cạn",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 31,
      remaining: -31,
      opensell: 31,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "35250000",
      revenue: "306250000",
      plannedRevenue: "0",
      openRevenue: "306250000",
      remainingRevenue: "-352500000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Tuyên Quang",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 8,
      remaining: -8,
      opensell: 8,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "5900000",
      revenue: "7550000",
      plannedRevenue: "0",
      openRevenue: "7550000",
      remainingRevenue: "-5900000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Hà Giang",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 7,
      remaining: -7,
      opensell: 8,
      recentlyBooked: 1,
      recentlyBooked30min: 1,
      completionRate: "-",
      dailyRevenue: "6792000",
      revenue: "40750000",
      plannedRevenue: "0",
      openRevenue: "37800000",
      remainingRevenue: "-40750000",
      recentlyRevenue30min: "8490000",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Cao Bằng",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 1,
      remaining: -1,
      opensell: 1,
      recentlyBooked: 1,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "4890000",
      revenue: "5500000",
      plannedRevenue: "0",
      openRevenue: "5500000",
      remainingRevenue: "-5500000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "MIỀN BẮC - Khác",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_bac",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 15,
      sold: 0,
      remaining: 15,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      dailyRevenue: "0",
      revenue: "0",
      plannedRevenue: "49250000",
      openRevenue: "0",
      remainingRevenue: "49250000",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
      topSalesUnit: "HCM"
    },

  /// Liên tuyến Miền Bắc
  {
  name: "Liên Tuyến Miền Bắc",
  code: "lien_tuyen_mien_bac",
  category: "domestic",
  level: "area",
  parentCode: "mien_bac",
  planned: 1271,
  sold: 0,
  remaining: 1271,
  opensell: 10,
  recentlyBooked: 1,
  recentlyBooked30min: 0,
  completionRate: "0",
  plannedRevenue: "2500000",
  revenue: "5751250000",
  remainingRevenue: "-5751250000",
  openRevenue: "11750000",
  opensell: 0,
  recentlyRevenue: "48980000",
  recentlyRevenue30min: "6985714.29",
  targetPercentage: "0"
  },
  {
    name: "MIỀN BẮC - Khác",
    category: "domestic",
    continent: null,
    geoRegion: "noi_dia",
    area: "lien_tuyen_mien_bac",
    imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
    planned: 1271,
    sold: 0,
    remaining: 1271,
    opensell: 10,
    recentlyBooked: 1,
    recentlyBooked30min: 0,
    completionRate: "0",
    plannedRevenue: "2500000",
    revenue: "5751250000",
    remainingRevenue: "-5751250000",
    openRevenue: "11750000",
    opensell: 0,
    recentlyRevenue: "48980000",
    recentlyRevenue30min: "6985714.29",
    targetPercentage: "0",
    topSalesUnit: "HCM"
  },
/// Tây Nam Bộ
    {
      name: "Phú Quốc",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 237,
      sold: 438,
      remaining: -201,
      opensell: 472,
      recentlyBooked: 13,
      recentlyBooked30min: 1,
      completionRate: "184.8",
      dailyRevenue: "20170440",
      revenue: "1849500000",
      plannedRevenue: "1601000000",
      openRevenue: "1771500000",
      remainingRevenue: "-248500000",
      recentlyRevenue30min: "1551572",
      targetPercentage: "115.52",
      topSalesUnit: "HCM"
    },
    {
      name: "Cần Thơ",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 166,
      sold: 82,
      remaining: 84,
      opensell: 93,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "49.4",
      dailyRevenue: "0",
      revenue: "187000000",
      plannedRevenue: "462500000",
      openRevenue: "189750000",
      remainingRevenue: "275500000",
      recentlyRevenue30min: "0",
      targetPercentage: "40.43",
      topSalesUnit: "HCM"
    },
    {
      name: "Cà Mau",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 62,
      remaining: -62,
      opensell: 67,
      recentlyBooked: 1,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "3035000",
      revenue: "29050000",
      plannedRevenue: "0",
      openRevenue: "24025000",
      remainingRevenue: "-29050000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Cần Thơ - Sóc Trăng - Bạc Liêu - Cà Mau",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 44,
      sold: 58,
      remaining: -14,
      opensell: 58,
      recentlyBooked: 5,
      recentlyBooked30min: 1,
      completionRate: "131.8",
      dailyRevenue: "25450000",
      revenue: "336250000",
      plannedRevenue: "287000000",
      openRevenue: "298750000",
      remainingRevenue: "-49250000",
      recentlyRevenue30min: "509000",
      targetPercentage: "117.16",
      topSalesUnit: "HCM"
    },
    {
      name: "Tiền Giang",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 21,
      remaining: -21,
      opensell: 25,
      recentlyBooked: 2,
      recentlyBooked30min: 1,
      completionRate: "-",
      dailyRevenue: "11980000",
      revenue: "12250000",
      plannedRevenue: "0",
      openRevenue: "14750000",
      remainingRevenue: "-12250000",
      recentlyRevenue30min: "599000",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Bến Tre",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 4,
      sold: 10,
      remaining: -6,
      opensell: 15,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "251.0",
      dailyRevenue: "6000000",
      revenue: "9750000",
      plannedRevenue: "750000",
      openRevenue: "9750000",
      remainingRevenue: "1500000",
      recentlyRevenue30min: "0",
      targetPercentage: "80.00",
      topSalesUnit: "HCM"
    },
    {
      name: "Đồng Tháp",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 8,
      remaining: -8,
      opensell: 8,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "21250000",
      revenue: "23750000",
      plannedRevenue: "0",
      openRevenue: "23750000",
      remainingRevenue: "-21250000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "An Giang",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 6,
      remaining: -6,
      opensell: 9,
      recentlyBooked: 3,
      recentlyBooked30min: 1,
      completionRate: "-",
      dailyRevenue: "5970000",
      revenue: "15250000",
      plannedRevenue: "0",
      openRevenue: "18000000",
      remainingRevenue: "-15250000",
      recentlyRevenue30min: "199000",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },
    {
      name: "Kiên Giang",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "tay_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 0,
      sold: 1,
      remaining: -1,
      opensell: 6,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "-",
      dailyRevenue: "3725000",
      revenue: "0",
      plannedRevenue: "0",
      openRevenue: "3725000",
      remainingRevenue: "-3725000",
      recentlyRevenue30min: "0",
      targetPercentage: "-",
      topSalesUnit: "HCM"
    },

  /// Đông nam Bộ
    {
      name: "TPHCM",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 3,
      sold: 62,
      remaining: -59,
      opensell: 62,
      recentlyBooked: 16,
      recentlyBooked30min: 2,
      completionRate: "2066.7%",
      dailyRevenue: "29856000",
      revenue: "18500000",
      plannedRevenue: "12250000",
      openRevenue: "17600000",
      remainingRevenue: "-173250000",
      recentlyRevenue30min: "3732000",
      targetPercentage: "1514.29%",
      topSalesUnit: "HCM"
    },
    {
      name: "Côn Đảo",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 6,
      sold: 9,
      remaining: -3,
      opensell: 11,
      recentlyBooked: 2,
      recentlyBooked30min: 0,
      completionRate: "150.0%",
      dailyRevenue: "9900000",
      revenue: "12575000",
      plannedRevenue: "5350000",
      openRevenue: "13125000",
      remainingRevenue: "-7225000",
      recentlyRevenue30min: "0",
      targetPercentage: "235.05%",
      topSalesUnit: "HCM"
    },
    {
      name: "Vũng Tàu - Long Hải",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 6,
      sold: 57,
      remaining: -51,
      opensell: 60,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "950.0%",
      dailyRevenue: "11325000",
      revenue: "78250000",
      plannedRevenue: "12750000",
      openRevenue: "113250000",
      remainingRevenue: "-100500000",
      recentlyRevenue30min: "0",
      targetPercentage: "888.24%",
      topSalesUnit: "HCM"
    },
    {
      name: "Tây Ninh",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 9,
      sold: 38,
      remaining: -29,
      opensell: 50,
      recentlyBooked: 6,
      recentlyBooked30min: 1,
      completionRate: "422.2%",
      dailyRevenue: "8340000",
      revenue: "48500000",
      plannedRevenue: "5750000",
      openRevenue: "64750000",
      remainingRevenue: "9000000",
      recentlyRevenue30min: "1390000",
      targetPercentage: "84.35%",
      topSalesUnit: "HCM"
    },
    {
      name: "MIỀN NAM - Khác",
      category: "domestic",
      continent: null,
      geoRegion: "noi_dia",
      area: "dong_nam_bo",
      imageUrl: "https://images.unsplash.com/photo-1528127269322-539801943592?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
      planned: 103,
      sold: 0,
      remaining: 103,
      opensell: 0,
      recentlyBooked: 0,
      recentlyBooked30min: 0,
      completionRate: "0.0%",
      dailyRevenue: "0",
      revenue: "0",
      plannedRevenue: "6250000",
      openRevenue: "0",
      remainingRevenue: "162500000",
      recentlyRevenue30min: "0",
      targetPercentage: "0.00%",
      topSalesUnit: "HCM"
    },

// Domestic Tours - Miền Nam

// International Tours - Đông Bắc Á
{
name: "Nhật Bản",
category: "international",
continent: "chau_a",
geoRegion: null,
area: "nhat_ban",
duration: "6N5D",
imageUrl: "https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
planned: 2156,
sold: 1987,
remaining: 169,
recentlyBooked: 10,
recentlyBooked30min: 2,
completionRate: "92.2",
dailyRevenue: "18500000000", // Doanh thư hôm nay
revenue: "287350000000",
plannedRevenue: "320000000000", // Doanh thu kế hoạch
targetPercentage: "15.2",
topSalesUnit: "HCM"
},
// International Tours - Đông Nam Á
{
name: "Singapore - Malaysia",
category: "international",
continent: "chau_a",
geoRegion: null,
area: "singapore_malaysia",
duration: "5N4D",
imageUrl: "https://images.unsplash.com/photo-1525625293386-3f8f99389edd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
planned: 1987,
sold: 1534,
remaining: 453,
recentlyBooked: 6,
recentlyBooked30min: 2,
completionRate: "77.2",
dailyRevenue: "9200000000", // Doanh thư hôm nay
revenue: "198700000000",
plannedRevenue: "210000000000", // Doanh thu kế hoạch
targetPercentage: "9.8",
topSalesUnit: "HN"
},
// Thêm các tour quốc tế khác
{
name: "Hàn Quốc",
category: "international",
continent: "chau_a",
geoRegion: null,
area: "han_quoc",
duration: "5N4D",
imageUrl: "https://images.unsplash.com/photo-1517154421773-0529f29ea451?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
planned: 2800,
sold: 2100,
remaining: 700,
recentlyBooked: 7,
recentlyBooked30min: 2,
completionRate: "75.0",
dailyRevenue: "8500000000",
revenue: "165000000000",
plannedRevenue: "190000000000",
targetPercentage: "8.2",
topSalesUnit: "HCM"
},
{
name: "Trung Quốc",
category: "international",
continent: "chau_a",
geoRegion: null,
area: "trung_quoc",
duration: "6N5D",
imageUrl: "https://images.unsplash.com/photo-1508804185872-d7badad00f7d?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
planned: 3200,
sold: 2400,
remaining: 800,
recentlyBooked: 4,
recentlyBooked30min: 2,
completionRate: "75.0",
dailyRevenue: "12000000000",
revenue: "180000000000",
plannedRevenue: "210000000000",
targetPercentage: "9.5",
topSalesUnit: "HN"
},
{
name: "Thái Lan",
category: "international",
continent: "chau_a",
geoRegion: null,
area: "thai_lan",
duration: "5N4D",
imageUrl: "https://images.unsplash.com/photo-1552465011-b4e21bf6e79a?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
planned: 2800,
sold: 2200,
remaining: 600,
recentlyBooked: 3,
recentlyBooked30min: 2,
completionRate: "78.6",
dailyRevenue: "9500000000",
revenue: "132000000000",
plannedRevenue: "155000000000",
targetPercentage: "10.5",
topSalesUnit: "HCM"
},
{
name: "Indonesia",
category: "international",
continent: "chau_a",
geoRegion: null,
area: "indonesia",
duration: "5N4D",
imageUrl: "https://images.unsplash.com/photo-1555333145-4acf190da336?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
planned: 1494,
sold: 716,
remaining: 778,
recentlyBooked: 2,
recentlyBooked30min: 2,
completionRate: "47.9",
dailyRevenue: "4200000000",
revenue: "56365000000",
plannedRevenue: "70000000000",
targetPercentage: "8.7",
topSalesUnit: "HN"
},
{
name: "Mongolia",
category: "international",
continent: "chau_a",
geoRegion: null,
area: "mongolia",
duration: "4N3D",
imageUrl: "https://images.unsplash.com/photo-1559827260-dc66d52bef19?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
planned: 597,
sold: 105,
remaining: 492,
recentlyBooked: 1,
recentlyBooked30min: 2,
completionRate: "17.6",
dailyRevenue: "1500000000",
revenue: "12286000000",
plannedRevenue: "25000000000",
targetPercentage: "2.8",
topSalesUnit: "CT"
},
{
name: "Lào",
category: "international",
continent: "chau_a",
geoRegion: null,
area: "lao",
imageUrl: "https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
planned: 800,
sold: 600,
remaining: 200,
recentlyBooked: 1,
recentlyBooked30min: 2,
completionRate: "75.0",
dailyRevenue: "3000000000",
revenue: "45000000000",
plannedRevenue: "55000000000",
targetPercentage: "7.2",
topSalesUnit: "HCM"
},
{
name: "Campuchia",
category: "international",
continent: "chau_a",
geoRegion: null,
area: "campuchia",
duration: "4N3D",
imageUrl: "https://images.unsplash.com/photo-1571211905393-9ffd0dd5b9a5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",
planned: 700,
sold: 500,
remaining: 200,
recentlyBooked: 1,
recentlyBooked30min: 2,
completionRate: "71.4",
dailyRevenue: "2800000000",
revenue: "43000000000",
plannedRevenue: "50000000000",
targetPercentage: "6.8",
topSalesUnit: "HN"
}
];
toursData.forEach(tourData => {
const tour: Tour = {
id: randomUUID(),
createdAt: new Date(),
updatedAt: new Date(),
name: tourData.name,
category: tourData.category,
continent: tourData.continent || null,
geoRegion: tourData.geoRegion || null,
area: tourData.area,
imageUrl: tourData.imageUrl || null,
planned: tourData.planned || 0,
sold: tourData.sold || 0,
opensell: tourData.opensell || 0,
remaining: tourData.remaining || 0,
recentlyBooked: tourData.recentlyBooked || 0,
recentlyBooked30min: tourData.recentlyBooked30min || 0,
completionRate: tourData.completionRate || "0",
dailyRevenue: tourData.dailyRevenue || "0",
revenue: tourData.revenue || "0",
openRevenue: tourData.openRevenue || "0",
plannedRevenue: tourData.plannedRevenue || "0",
targetPercentage: tourData.targetPercentage || "0",
topSalesUnit: tourData.topSalesUnit || "HN",
isActive: true
};
this.tours.set(tour.id, tour);
});
// Initialize regional performance
const performanceData: InsertRegionalPerformance[] = [
{ cityName: "TP. Hồ Chí Minh", performanceRate: "85.2", status: "good" },
{ cityName: "Hà Nội", performanceRate: "78.9", status: "good" },
{ cityName: "Đà Nẵng", performanceRate: "72.4", status: "moderate" },
{ cityName: "Cần Thơ", performanceRate: "68.1", status: "moderate" },
{ cityName: "Nha Trang", performanceRate: "61.7", status: "poor" },
];
performanceData.forEach(perfData => {
const performance: RegionalPerformance = {
id: randomUUID(),
cityName: perfData.cityName,
performanceRate: perfData.performanceRate || "0",
status: perfData.status || "good"
};
this.regionalPerformance.set(performance.id, performance);
});
// Initialize recent activities
const activitiesData: InsertActivity[] = [
{
type: "booking",
message: "Tour Hạ Long - Sapa đã bán +25 chỗ",
location: "Hồ Chí Minh"
},
{
type: "price_update",
message: "Tour Châu Âu đã mở thêm +30 chỗ",
location: "Hà Nội"
},
{
type: "new_tour",
message: "Tour Tây Nguyên cập nhật kế hoạch - 500 chỗ",
location: "Đà Nẵng"
}
];
activitiesData.forEach(actData => {
const activity: Activity = {
id: randomUUID(),
type: actData.type,
message: actData.message,
location: actData.location,
tourId: null,
timestamp: new Date()
};
this.activities.set(activity.id, activity);
});
}
async getTours(): Promise<Tour[]> {
return Array.from(this.tours.values())
.sort((a, b) => b.recentlyBooked - a.recentlyBooked);
}
async getToursByCategory(category: string): Promise<Tour[]> {
return Array.from(this.tours.values())
.filter(tour => tour.category === category)
.sort((a, b) => b.recentlyBooked - a.recentlyBooked);
}
async getToursByArea(areaCode: string): Promise<Tour[]> {
return Array.from(this.tours.values())
.filter(tour => tour.area === areaCode)
.sort((a, b) => b.recentlyBooked - a.recentlyBooked);
}
async getToursBySalesUnit(salesUnitCode: string): Promise<Tour[]> {
return Array.from(this.tours.values())
.filter(tour => tour.topSalesUnit === salesUnitCode)
.sort((a, b) => b.recentlyBooked - a.recentlyBooked);
}
async createTour(insertTour: InsertTour): Promise<Tour> {
const id = randomUUID();
const tour: Tour = {
id,
createdAt: new Date(),
updatedAt: new Date(),
name: insertTour.name,
category: insertTour.category,
continent: insertTour.continent ?? null,
geoRegion: insertTour.geoRegion ?? null,
area: insertTour.area,
imageUrl: insertTour.imageUrl ?? null,
planned: insertTour.planned ?? 0,
  opensell: insertTour.opensell ?? 0,
sold: insertTour.sold ?? 0,
remaining: insertTour.remaining ?? 0,
recentlyBooked: insertTour.recentlyBooked ?? 0,
recentlyBooked30min: insertTour.recentlyBooked30min ?? 0,
completionRate: insertTour.completionRate ?? "0",
dailyRevenue: insertTour.dailyRevenue ?? "0",
revenue: insertTour.revenue ?? "0",
plannedRevenue: insertTour.plannedRevenue ?? "0",
openRevenue: insertTour.openRevenue ?? "0",
targetPercentage: insertTour.targetPercentage ?? "0",
topSalesUnit: insertTour.topSalesUnit ?? "HCM",
isActive: insertTour.isActive ?? true
};
this.tours.set(id, tour);
return tour;
}
async updateTour(id: string, tourUpdate: Partial<Tour>): Promise<Tour | undefined> {
const tour = this.tours.get(id);
if (!tour) return undefined;
const updatedTour: Tour = { ...tour, ...tourUpdate, updatedAt: new Date() };
this.tours.set(id, updatedTour);
return updatedTour;
}
async getHierarchyLevels(): Promise<HierarchyLevel[]> {
return Array.from(this.hierarchyLevels.values())
.sort((a, b) => b.recentlyBooked - a.recentlyBooked);
}
async getHierarchyLevelsByCategory(category: string): Promise<HierarchyLevel[]> {
return Array.from(this.hierarchyLevels.values())
.filter(level => level.category === category)
.sort((a, b) => b.recentlyBooked - a.recentlyBooked);
}
async getHierarchyLevelsByLevel(level: string): Promise<HierarchyLevel[]> {
return Array.from(this.hierarchyLevels.values())
.filter(h => h.level === level)
.sort((a, b) => b.recentlyBooked - a.recentlyBooked);
}
async createHierarchyLevel(insertLevel: InsertHierarchyLevel): Promise<HierarchyLevel> {
const id = randomUUID();
const level: HierarchyLevel = {
id,
name: insertLevel.name,
category: insertLevel.category,
code: insertLevel.code,
level: insertLevel.level,
parentCode: insertLevel.parentCode ?? null,
planned: insertLevel.planned ?? 0,
sold: insertLevel.sold ?? 0,
remaining: insertLevel.remaining ?? 0,
recentlyBooked: insertLevel.recentlyBooked ?? 0,
recentlyBooked30min: insertLevel.recentlyBooked30min ?? 0,
completionRate: insertLevel.completionRate ?? "0",
revenue: insertLevel.revenue ?? "0",
plannedRevenue: insertLevel.plannedRevenue ?? "0",
openRevenue: insertLevel.openRevenue ?? "0",
targetPercentage: insertLevel.targetPercentage ?? "0"
};
this.hierarchyLevels.set(id, level);
return level;
}
async updateHierarchyLevel(id: string, levelUpdate: Partial<HierarchyLevel>): Promise<HierarchyLevel | undefined> {
const level = this.hierarchyLevels.get(id);
if (!level) return undefined;
const updatedLevel: HierarchyLevel = { ...level, ...levelUpdate };
this.hierarchyLevels.set(id, updatedLevel);
return updatedLevel;
}
async getSalesUnits(): Promise<SalesUnit[]> {
return Array.from(this.salesUnits.values());
}
async createSalesUnit(insertUnit: InsertSalesUnit): Promise<SalesUnit> {
const id = randomUUID();
const unit: SalesUnit = {
id,
name: insertUnit.name,
code: insertUnit.code,
performanceRate: insertUnit.performanceRate ?? "0",
status: insertUnit.status ?? "good"
};
this.salesUnits.set(id, unit);
return unit;
}
async updateSalesUnit(id: string, unitUpdate: Partial<SalesUnit>): Promise<SalesUnit | undefined> {
const unit = this.salesUnits.get(id);
if (!unit) return undefined;
const updatedUnit: SalesUnit = { ...unit, ...unitUpdate };
this.salesUnits.set(id, updatedUnit);
return updatedUnit;
}
async getRecentActivities(limit: number = 10): Promise<Activity[]> {
return Array.from(this.activities.values())
.sort((a, b) => (b.timestamp?.getTime() || 0) - (a.timestamp?.getTime() || 0))
.slice(0, limit);
}
async createActivity(insertActivity: InsertActivity): Promise<Activity> {
const id = randomUUID();
const activity: Activity = {
id,
type: insertActivity.type,
message: insertActivity.message,
location: insertActivity.location,
tourId: insertActivity.tourId ?? null,
timestamp: new Date()
};
this.activities.set(id, activity);
return activity;
}
async getRegionalPerformance(): Promise<RegionalPerformance[]> {
return Array.from(this.regionalPerformance.values())
.sort((a, b) => parseFloat(b.performanceRate) - parseFloat(a.performanceRate));
}
async createRegionalPerformance(insertPerformance: InsertRegionalPerformance): Promise<RegionalPerformance> {
const id = randomUUID();
const performance: RegionalPerformance = {
id,
cityName: insertPerformance.cityName,
performanceRate: insertPerformance.performanceRate ?? "0",
status: insertPerformance.status ?? "good"
};
this.regionalPerformance.set(id, performance);
return performance;
}
async getDashboardMetrics(): Promise<DashboardMetrics> {
const tours = Array.from(this.tours.values());
const hierarchyLevels = Array.from(this.hierarchyLevels.values());
const totalActiveTours = tours.length;
// Calculate from hierarchy levels data (more comprehensive than tours data)
const totalSold = hierarchyLevels.reduce((sum, level) => sum + level.sold, 0);
const totalPlanned = hierarchyLevels.reduce((sum, level) => sum + level.planned, 0);
const totalopensell = hierarchyLevels.reduce((sum, level) => sum + level.opensell, 0);
const totalRevenue = hierarchyLevels.reduce((sum, level) => sum + parseFloat(level.revenue), 0);
const totalPlannedRevenue = hierarchyLevels.reduce((sum, level) => sum + parseFloat(level.plannedRevenue), 0);
const totalDailyBookings = hierarchyLevels.reduce((sum, level) => sum + level.recentlyBooked30min, 0);
// Calculate total daily revenue from all tours
const totalDailyRevenue = tours.reduce((sum, tour) => sum + parseFloat(tour.dailyRevenue || "0"), 0);
const totalopenRevenue = tours.reduce((sum, tour) => sum + parseFloat(tour.openRevenue || "0"), 0);
// Calculate percentage vs plan for tours sold
const toursSoldPlanPercentage = totalPlanned > 0 ? parseFloat(((totalSold / totalPlanned) * 100).toFixed(1)) : 0;
// Calculate revenue percentage vs plan: Tổng Doanh Thu / Doanh thu Kế Hoạch
const revenuePlanPercentage = totalPlannedRevenue > 0 ? parseFloat(((totalRevenue / totalPlannedRevenue) * 100).toFixed(1)) : 0;
// Previous values for change calculation
const yesterdayBookings = Math.floor(Math.random() * 5) + 2;
const dailyBookingsChange = totalDailyBookings - yesterdayBookings;
return {
totalActiveTours: totalActiveTours,
totalActiveToursChange: 12.5,
dailyBookings: totalDailyBookings, // Tổng từ cột "Số Chỗ Bán Hôm Nay"
dailyBookingsChange: dailyBookingsChange,
dailyRevenue: (totalDailyRevenue ).toFixed(1) , // Tổng từ cột "Doanh thư hôm nay"
openRevenue : (totalopenRevenue ).toFixed(1) ,
dailyRevenueChange: 8.3,
toursSold: totalSold, // Tổng từ cột "Đã bán"
toursSoldChange: -3.2, // Keep for compatibility, but will show percentage instead
toursSoldPlanPercentage: toursSoldPlanPercentage, // % so với kế hoạch
revenue: (totalRevenue ).toFixed(1) , // Tổng từ cột "Doanh Thu"
revenueChange: 5.2, // Revenue change percentage
revenuePlanPercentage: revenuePlanPercentage, // % = Tổng Doanh Thu / Doanh thu Kế Hoạch
completionRate: totalPlanned > 0 ? parseFloat(((totalSold / totalPlanned) * 100).toFixed(1)) : 0,
};
}
}
export const storage = new MemStorage();